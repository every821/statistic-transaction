!function(t){"use strict";if("object"==typeof exports)module.exports=t("undefined"!=typeof angular?angular:require("angular"),"undefined"!=typeof Chart?Chart:require("chart.js"));else if("function"==typeof define&&define.amd)define(["angular","chart"],t);else{if("undefined"==typeof angular||"undefined"==typeof Chart)throw new Error("Chart.js library needs to included, see http://jtblin.github.io/angular-chart.js/");t(angular,Chart)}}(function(t,r){"use strict";function e(){var e={},a={Chart:r,getOptions:function(r){var a=r&&e[r]||{};return t.extend({},e,a)}};this.setOptions=function(r,a){return a?void(e[r]=t.extend(e[r]||{},a)):(a=r,void(e=t.extend(e,a)))},this.$get=function(){return a}}function a(e,a){function o(t,r){return t&&r&&t.length&&r.length?Array.isArray(t[0])?t.length===r.length&&t.every(function(t,e){return t.length===r[e].length}):r.reduce(c,0)>0?t.length===r.length:!1:!1}function c(t,r){return t+r}function i(r,e,a,n){var o=null;return function(c){var i=e.getElementsAtEvent||e.getPointsAtEvent;if(i){var u=i.call(e,c);n!==!1&&t.equals(o,u)!==!1||(o=u,r[a](u,c))}}}function u(a,n){for(var o=t.copy(n.chartColors||e.getOptions(a).chartColors||r.defaults.global.colors),c=o.length<n.chartData.length;o.length<n.chartData.length;)o.push(n.chartGetColor());return c&&(n.chartColors=o),o.map(l)}function l(t){return"object"==typeof t&&null!==t?t:"string"==typeof t&&"#"===t[0]?s(g(t.substr(1))):h()}function h(){var t=[d(0,255),d(0,255),d(0,255)];return s(t)}function s(t){return{backgroundColor:f(t,.2),pointBackgroundColor:f(t,1),pointHoverBackgroundColor:f(t,.8),borderColor:f(t,1),pointBorderColor:"#fff",pointHoverBorderColor:f(t,1)}}function d(t,r){return Math.floor(Math.random()*(r-t+1))+t}function f(t,r){return n?"rgb("+t.join(",")+")":"rgba("+t.concat(r).join(",")+")"}function g(t){var r=parseInt(t,16),e=r>>16&255,a=r>>8&255,n=255&r;return[e,a,n]}function p(t){return t.chartData&&t.chartData.length&&t.chartLabels&&t.chartLabels.length}function v(r,e,a,n,o){return{labels:r,datasets:e.map(function(r,e){var c=t.extend({},n[e],{label:a[e],data:r});return o&&o.length>=e&&t.merge(c,o[e]),c})}}function C(r,e,a,n){var o={labels:r,datasets:[{data:e,backgroundColor:a.map(function(t){return t.pointBackgroundColor}),hoverBackgroundColor:a.map(function(t){return t.backgroundColor})}]};return n&&t.merge(o.datasets[0],n),o}function y(t,r,e){Array.isArray(e.chartData[0])?t.data.datasets.forEach(function(t,e){t.data=r[e]}):t.data.datasets[0].data=r,t.update(),e.$emit("chart-update",t)}function b(t){return!t||Array.isArray(t)&&!t.length||"object"==typeof t&&!Object.keys(t).length}function m(a,n){var o=t.extend({},r.defaults.global,e.getOptions(a),n.chartOptions);return o.responsive}function w(t,r){t&&(t.destroy(),r.$emit("chart-destroy",t))}return function(r){return{restrict:"CA",scope:{chartGetColor:"=?",chartType:"=",chartData:"=?",chartLabels:"=?",chartOptions:"=?",chartSeries:"=?",chartColors:"=?",chartClick:"=?",chartHover:"=?",chartDatasetOverride:"=?"},link:function(c,l){function s(e,a){if(!b(e)&&!t.equals(e,a)){var n=r||c.chartType;n&&d(n)}}function d(r){if(m(r,c)&&0===l[0].clientHeight)return a(function(){d(r)},50,!1);if(p(c)){c.chartGetColor="function"==typeof c.chartGetColor?c.chartGetColor:h;var n=u(r,c),o=l[0],s=o.getContext("2d"),g=Array.isArray(c.chartData[0])?v(c.chartLabels,c.chartData,c.chartSeries||[],n,c.chartDatasetOverride):C(c.chartLabels,c.chartData,n,c.chartDatasetOverride),y=t.extend({},e.getOptions(r),c.chartOptions);w(f,c),f=new e.Chart(s,{type:r,data:g,options:y}),c.$emit("chart-create",f),o.onclick=c.chartClick?i(c,f,"chartClick",!1):t.noop,o.onmousemove=c.chartHover?i(c,f,"chartHover",!0):t.noop}}var f;n&&window.G_vmlCanvasManager.initElement(l[0]),c.$watch("chartData",function(t,e){if(!t||!t.length||Array.isArray(t[0])&&!t[0].length)return void w(f,c);var a=r||c.chartType;if(a)return f&&o(t,e)?y(f,t,c):void d(a)},!0),c.$watch("chartSeries",s,!0),c.$watch("chartLabels",s,!0),c.$watch("chartOptions",s,!0),c.$watch("chartColors",s,!0),c.$watch("chartDatasetOverride",s,!0),c.$watch("chartType",function(r,e){b(r)||t.equals(r,e)||d(r)}),c.$on("$destroy",function(){w(f,c)}),c.$on("$resize",function(){f&&f.resize()})}}}}r.defaults.global.multiTooltipTemplate="<%if (datasetLabel){%><%=datasetLabel%>: <%}%><%= value %>",r.defaults.global.tooltips.mode="label",r.defaults.global.elements.line.borderWidth=2,r.defaults.global.elements.rectangle.borderWidth=2,r.defaults.global.legend.display=!1,r.defaults.global.colors=["#97BBCD","#DCDCDC","#F7464A","#46BFBD","#FDB45C","#949FB1","#4D5360"];var n="object"==typeof window.G_vmlCanvasManager&&null!==window.G_vmlCanvasManager&&"function"==typeof window.G_vmlCanvasManager.initElement;return n&&(r.defaults.global.animation=!1),t.module("chart.js",[]).provider("ChartJs",e).factory("ChartJsFactory",["ChartJs","$timeout",a]).directive("chartBase",["ChartJsFactory",function(t){return new t}]).directive("chartLine",["ChartJsFactory",function(t){return new t("line")}]).directive("chartBar",["ChartJsFactory",function(t){return new t("bar")}]).directive("chartHorizontalBar",["ChartJsFactory",function(t){return new t("horizontalBar")}]).directive("chartRadar",["ChartJsFactory",function(t){return new t("radar")}]).directive("chartDoughnut",["ChartJsFactory",function(t){return new t("doughnut")}]).directive("chartPie",["ChartJsFactory",function(t){return new t("pie")}]).directive("chartPolarArea",["ChartJsFactory",function(t){return new t("polarArea")}])});
//# sourceMappingURL=angular-chart.min.js.map
